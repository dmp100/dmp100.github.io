---
layout: default
---

<div class="category-page">
  <div class="post-back">
  </div>
  
  <div class="category-header">
    <h1 class="category-title">ğŸ“ {{ page.category }}/</h1>
    <p class="category-description">{{ page.description }}</p>
  </div>
  
  <!-- Posts Tree -->
  <div class="posts-tree">
    <div class="tree-root">_posts/{{ page.category }}/</div>
    
    {% assign all_posts = site.categories[page.category] %}
    {% if all_posts and all_posts.size > 0 %}
      {% assign all_posts = all_posts | sort: 'date' | reverse %}
      {% assign folder_map = "" | split: "" %}
    
    {% comment %} 1ë‹¨ê³„: ëª¨ë“  í´ë” ê²½ë¡œì™€ í¬ìŠ¤íŠ¸ ë§¤í•‘ {% endcomment %}
    {% for post in all_posts %}
      {% assign sub_path = "" %}
      {% assign started = false %}
      {% for cat in post.categories %}
        {% if started %}
          {% if sub_path == "" %}
            {% assign sub_path = cat %}
          {% else %}
            {% assign sub_path = sub_path | append: "/" | append: cat %}
          {% endif %}
        {% endif %}
        {% if cat == page.category %}
          {% assign started = true %}
        {% endif %}
      {% endfor %}
      
      {% comment %} í´ë” ê²½ë¡œë¥¼ í‚¤ë¡œ í¬ìŠ¤íŠ¸ ì €ì¥ {% endcomment %}
      {% assign found = false %}
      {% for item in folder_map %}
        {% if item.path == sub_path %}
          {% assign found = true %}
        {% endif %}
      {% endfor %}
      {% unless found %}
        {% assign new_item = "" | split: "" %}
        {% assign folder_map = folder_map | push: sub_path %}
      {% endunless %}
    {% endfor %}
    
    {% comment %} 2ë‹¨ê³„: í´ë” êµ¬ì¡° ì¶œë ¥ {% endcomment %}
    {% assign sorted_paths = folder_map | uniq | sort %}
    {% assign displayed_folders = "" | split: "" %}
    
    {% for folder_path in sorted_paths %}
      {% if folder_path != "" %}
        {% assign parts = folder_path | split: "/" %}
        {% assign depth = parts.size %}
        
        {% comment %} ê° ê¹Šì´ë³„ë¡œ í´ë” í‘œì‹œ {% endcomment %}
        {% for i in (1..depth) %}
          {% assign current_parts = "" | split: "" %}
          {% for j in (1..i) %}
            {% assign idx = j | minus: 1 %}
            {% assign current_parts = current_parts | push: parts[idx] %}
          {% endfor %}
          {% assign current_path = current_parts | join: "/" %}
          
          {% unless displayed_folders contains current_path %}
            {% assign displayed_folders = displayed_folders | push: current_path %}
            {% assign indent = i | minus: 1 | times: 20 %}
            {% assign folder_name = parts[idx] %}
            
            <div class="tree-folder" style="padding-left: {{ indent }}px;">
              {% if i > 1 %}
                {% for k in (1..i) %}
                  {% if forloop.first == false and forloop.last == false %}
                    <span class="tree-indent">â”‚   </span>
                  {% endif %}
                {% endfor %}
              {% endif %}
              <span class="tree-icon">â”œâ”€â”€</span>
              <span class="folder-name">ğŸ“ {{ folder_name }}/</span>
            </div>
          {% endunless %}
        {% endfor %}
        
        {% comment %} í•´ë‹¹ í´ë”ì˜ í¬ìŠ¤íŠ¸ ì¶œë ¥ {% endcomment %}
        {% for post in all_posts %}
          {% assign post_path = "" %}
          {% assign started = false %}
          {% for cat in post.categories %}
            {% if started %}
              {% if post_path == "" %}
                {% assign post_path = cat %}
              {% else %}
                {% assign post_path = post_path | append: "/" | append: cat %}
              {% endif %}
            {% endif %}
            {% if cat == page.category %}
              {% assign started = true %}
            {% endif %}
          {% endfor %}
          
          {% if post_path == folder_path %}
            {% assign indent = depth | times: 20 %}
            <div class="tree-post" style="padding-left: {{ indent }}px;">
              {% for k in (1..depth) %}
                {% if forloop.last == false %}
                  <span class="tree-indent">â”‚   </span>
                {% endif %}
              {% endfor %}
              <span class="tree-icon">â”œâ”€â”€</span>
              <span class="post-date">{{ post.date | date: "%y.%m.%d" }}</span>
              <a class="post-link" href="{{ post.url | relative_url }}">{{ post.title | escape }}</a>
            </div>
          {% endif %}
        {% endfor %}
      {% else %}
        {% comment %} ë£¨íŠ¸ ë ˆë²¨ í¬ìŠ¤íŠ¸ {% endcomment %}
        {% for post in all_posts %}
          {% assign post_path = "" %}
          {% assign started = false %}
          {% for cat in post.categories %}
            {% if started %}
              {% if post_path == "" %}
                {% assign post_path = cat %}
              {% else %}
                {% assign post_path = post_path | append: "/" | append: cat %}
              {% endif %}
            {% endif %}
            {% if cat == page.category %}
              {% assign started = true %}
            {% endif %}
          {% endfor %}
          
          {% if post_path == "" %}
            <div class="tree-post">
              <span class="tree-icon">â”œâ”€â”€</span>
              <span class="post-date">{{ post.date | date: "%y.%m.%d" }}</span>
              <a class="post-link" href="{{ post.url | relative_url }}">{{ post.title | escape }}</a>
            </div>
          {% endif %}
        {% endfor %}
      {% endif %}
    {% endfor %}
    {% else %}
      <div class="tree-post">
        <span class="post-date">No posts in this category yet.</span>
      </div>
    {% endif %}
  </div>
</div>

